<!DOCTYPE html><html class="theme-next muse use-motion"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="dart,"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml"><meta name="description" content="本文是对 Dart 语言的官方文档做了简单的翻译和总结，有不当之处敬请指正。如果有时间和精力建议通读官方文档  hello world// Define a function. printNumber(num aNumber) {   print(&amp;apos;The number is $aNumber.&amp;apos;); // Print to console. }  // This is wh"><meta name="keywords" content="dart"><meta property="og:type" content="article"><meta property="og:title" content="dart 语法基础"><meta property="og:url" content="https://littlechao.top/uncategorized/dart 语法基础.html"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="本文是对 Dart 语言的官方文档做了简单的翻译和总结，有不当之处敬请指正。如果有时间和精力建议通读官方文档  hello world// Define a function. printNumber(num aNumber) {   print(&amp;apos;The number is $aNumber.&amp;apos;); // Print to console. }  // This is wh"><meta property="og:locale" content="default"><meta property="og:updated_time" content="2018-04-20T08:30:16.347Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="dart 语法基础"><meta name="twitter:description" content="本文是对 Dart 语言的官方文档做了简单的翻译和总结，有不当之处敬请指正。如果有时间和精力建议通读官方文档  hello world// Define a function. printNumber(num aNumber) {   print(&amp;apos;The number is $aNumber.&amp;apos;); // Print to console. }  // This is wh"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"Author"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://littlechao.top/uncategorized/dart 语法基础.html"><title>dart 语法基础 | Hexo</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="default"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="site-meta-headline"><a><img class="custom-logo-image" src="/images/avatar.png" alt="Hexo"></a></div><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Hexo</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>About</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://littlechao.top/uncategorized/dart 语法基础.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="chaochao"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.png"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Hexo"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">dart 语法基础</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-12-15T00:00:00+08:00">2017-12-15 </time></span><span id="/uncategorized/dart 语法基础.html" class="leancloud_visitors" data-flag-title="dart 语法基础"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">Visitors&#58;</span> <span class="leancloud-visitors-count"></span></span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">Words count in article&#58;</span> <span title="Words count in article">3,583 </span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">Reading time &asymp;</span> <span title="Reading time">15</span></div></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>本文是对 Dart 语言的官方文档做了简单的翻译和总结，有不当之处敬请指正。<br>如果有时间和精力建议通读<a href="https://www.dartlang.org/guides/language/language-tour" target="_blank" rel="noopener">官方文档</a></p></blockquote><h3 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world"></a>hello world</h3><pre><code>// Define a function.
printNumber(num aNumber) {
  print(&apos;The number is $aNumber.&apos;); // Print to console.
}

// This is where the app starts executing.
main() {
  var number = 42; // Declare and initialize a variable.
  printNumber(number); // Call a function.
}
</code></pre><hr><h3 id="重要的概念"><a href="#重要的概念" class="headerlink" title="重要的概念"></a>重要的概念</h3><ul><li>能赋值给变量的所以东西都是对象，包括 numbers, null, function, 都是继承自 Object 内置类</li><li>尽量给变量定义一个类型，会更安全，没有显示定义类型的变量在 debug 模式下会类型会是 dynamic（动态的）</li><li>dart 在 running 之前解析你的所有代码，指定数据类型和编译时的常量，可以提高运行速度</li><li>dart 提供了顶级函数(如：main())</li><li>dart 没有 public、private、protected 这些关键字，变量名以”_”开头意味着对它的 lib 是私有的</li></ul><hr><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><blockquote><p>没有初始化的变量都会被赋予默认值 null</p></blockquote><pre><code>var name = &apos;Bob&apos;;
var unInitializeValue1;   //未给初值的变量，默认值为 null
Int unInitializeValue2;   //即使是Int 型，默认值也是 null
</code></pre><p>程序中只当数据类型是为了指出自己的使用意图，并帮助语言进行语法检查。但是，指定类型不是必须的</p><h6 id="num"><a href="#num" class="headerlink" title="num"></a>num</h6><ul><li><p>int 取值范围：-2^53 to 2^53</p><pre><code>// String -&gt; int
var one = int.parse(&apos;1&apos;);

// String -&gt; double
var onePointOne = double.parse(&apos;1.1&apos;);

// int -&gt; String
String oneAsString = 1.toString();

// double -&gt; String 注意括号中要有小数点位数，否则报错
String piAsString = 3.14159.toStringAsFixed(2);
</code></pre></li></ul><h6 id="string"><a href="#string" class="headerlink" title="string"></a>string</h6><ul><li>‘’’…’’’，”””…”””表示多行字符串</li><li>r’…’,r”…”表示“raw”字符串</li><li>用 $ 或 ${} 来计算字符串中变量的值</li></ul><h6 id="bool"><a href="#bool" class="headerlink" title="bool"></a>bool</h6><ul><li>Dart 是强 bool 类型检查，<strong>只有bool 类型的值是true 才被认为是true</strong></li></ul><h6 id="list"><a href="#list" class="headerlink" title="list"></a>list</h6><blockquote><p>list 基本和 JavaScript 数组一样，它的方法如下：</p></blockquote><pre><code>// 使用List的构造函数，也可以添加int参数，表示List固定长度，不能进行添加 删除操作
var vegetables = new List();

// 或者简单的用List来赋值
var fruits = [&apos;apples&apos;, &apos;oranges&apos;];

// 添加元素
fruits.add(&apos;kiwis&apos;);

// 添加多个元素
fruits.addAll([&apos;grapes&apos;, &apos;bananas&apos;]);

// 获取第一个元素
fruits.first;

// 获取元素最后一个元素
fruits.last;

// 查找某个元素的索引号
assert(fruits.indexOf(&apos;apples&apos;) == 0);

// 删除指定位置的元素，返回删除的元素
fruits.removeAt(index);

// 删除指定元素,成功返回true，失败返回false
fruits.remove(&apos;apples&apos;);

// 删除最后一个元素，返回删除的元素
fruits.removeLast();

// 删除指定范围元素，含头不含尾，成功返回null
fruits.removeRange(start,end);

// 删除指定条件的元素，成功返回null
fruits.removeWhere((item) =&gt; item.length &gt;6)；

// 删除所有的元素
fruits.clear();

// sort()对元素进行排序，传入一个函数作为参数，return &lt;0表示由小到大， &gt;0表示由大到小
fruits.sort((a, b) =&gt; a.compareTo(b));
</code></pre><h6 id="map"><a href="#map" class="headerlink" title="map"></a>map</h6><blockquote><p>类似 JavaScript map</p></blockquote><pre><code>// Map的声明
var hawaiianBeaches = {
    &apos;oahu&apos; : [&apos;waikiki&apos;, &apos;kailua&apos;, &apos;waimanalo&apos;],
    &apos;big island&apos; : [&apos;wailea bay&apos;, &apos;pololu beach&apos;],
    &apos;kauai&apos; : [&apos;hanalei&apos;, &apos;poipu&apos;]
};
var searchTerms = new Map();

// 指定键值对的参数类型
var nobleGases = new Map&lt;int, String&gt;();

// Map的赋值，中括号中是Key，这里可不是数组
nobleGase[54] = &apos;dart&apos;;

//Map中的键值对是唯一的
//同Set不同，第二次输入的Key如果存在，Value会覆盖之前的数据
nobleGases[54] = &apos;xenon&apos;;
assert(nobleGases[54] == &apos;xenon&apos;);

// 检索Map是否含有某Key
assert(nobleGases.containsKey(54));

//删除某个键值对
nobleGases.remove(54);
assert(!nobleGases.containsKey(54));
</code></pre><p>注：如果定义了一个 map 常量，那么value 也必须是常量</p><h6 id="symbol"><a href="#symbol" class="headerlink" title="symbol"></a>symbol</h6><blockquote><p>symbol字面量是编译时常量，在标识符前面加#。如果是动态确定，则使用Symbol构造函数，通过new来实例化</p></blockquote><hr><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><blockquote><p>所有的函数都会有返回值。如果没有指定函数返回值，则默认的返回值是null。没有返回值的函数，系统会在最后添加隐式的return 语句。</p></blockquote><h6 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h6><p>函数可以有两种类型的参数：</p><ul><li>必须的——必须的参数放在参数列表的前面。</li><li>可选的——可选的参数跟在必须的参数后面。</li></ul><p>注：可选参数必须放在最后</p><blockquote><p>通过【】来表示可选参数</p></blockquote><pre><code>String say(String from, String msg, [String device]) {
  var result = &apos;$from says $msg&apos;;
  if (device != null) {
    result = &apos;$result with a $device&apos;;
  }
  return result;
}
</code></pre><blockquote><p>还可以设置默认参数值</p></blockquote><pre><code>String say(String from, String msg,
    [String device = &apos;carrier pigeon&apos;, String mood]) {
  var result = &apos;$from says $msg&apos;;
  if (device != null) {
    result = &apos;$result with a $device&apos;;
  }
  if (mood != null) {
    result = &apos;$result (in a $mood mood)&apos;;
  }
  return result;
}
</code></pre><blockquote><p>函数还可以作为另一个函数的参数</p></blockquote><pre><code>printElement(element) {
  print(element);
}

var list = [1, 2, 3];

// Pass printElement as a parameter.
list.forEach(printElement);
</code></pre><blockquote><p>函数可以匿名，但是不像 JavaScript， 匿名函数不用加上 function 关键字</p></blockquote><pre><code>var list = [&apos;apples&apos;, &apos;oranges&apos;, &apos;grapes&apos;, &apos;bananas&apos;, &apos;plums&apos;];
list.forEach((i) {
  print(list.indexOf(i).toString() + &apos;: &apos; + i);
});
</code></pre><h6 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h6><pre><code>Function makeAdder(num addBy) {
  return (num i) =&gt; addBy + i;
}

main() {
  // Create a function that adds 2.
  var add2 = makeAdder(2);

  // Create a function that adds 4.
  var add4 = makeAdder(4);

  assert(add2(3) == 5);
  assert(add4(3) == 7);
}
</code></pre><hr><h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><p>除了常见的，还有如下运算符：</p><ul><li>is 运算符，a is b，用于判断 a 对象是否是 b 类的实例，返回 bool 值</li><li>is！意义与上面相反</li><li><p>as 运算符；用于检查类型</p><pre><code>(emp as Person).firstName = &apos;Bob&apos;;
</code></pre></li></ul><p>如果 emp 为空或者不是 Person 的实例，会抛出异常</p><ul><li><p>??= 运算符</p><pre><code>b ??= value; // 如果 b 为空，把 value 赋值给 b;
             // 否则，b 不变
</code></pre></li><li><p>?? 运算符</p><pre><code>String toString() =&gt; msg ?? super.toString();
//如果 msg 不为空，返回 msg；否则返回后面的
</code></pre></li><li><p>.. 运算符，把对同一对象的不同操作串联起来</p><pre><code>final addressBook = (new AddressBookBuilder()
      ..name = &apos;jenny&apos;
      ..email = &apos;jenny@example.com&apos;
      ..phone = (new PhoneNumberBuilder()
            ..number = &apos;415-555-0100&apos;
            ..label = &apos;home&apos;)
          .build())
    .build();
</code></pre></li></ul><h3 id="流程控制语句"><a href="#流程控制语句" class="headerlink" title="流程控制语句"></a>流程控制语句</h3><ul><li>if…else</li><li>for</li><li>while do-while</li><li>break continue</li><li>switch…case 如果 case 后面有表达式但是没有 break，会抛出异常</li><li>assert（仅在checked模式有效），如果条件为假，抛出异常</li></ul><hr><h3 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h3><h5 id="throw"><a href="#throw" class="headerlink" title="throw"></a>throw</h5><ul><li><p>抛出固定类型的异常：</p><pre><code>throw new FormatException(&apos;Expected at least 1 section&apos;);
</code></pre></li><li><p>抛出任意类型的异常：</p><pre><code>throw &apos;out of llamas！&apos;
</code></pre></li><li><p>因为抛出异常属于表达式，可以将throw语句放在=&gt;语句中，或者其它可以出现表达式的地方：</p><pre><code>distanceTo(Point other) =&gt;
    throw new UnimplementedError();
</code></pre><h5 id="catch"><a href="#catch" class="headerlink" title="catch"></a>catch</h5></li><li><p>可以通过 on语句来指定需要捕获的异常类型，使用catch来处理异常</p><pre><code>try {
  breedMoreLlamas();
} on OutOfLlamasException {
  // A specific exception
  buyMoreLlamas();
} on Exception catch (e) {
  // Anything else that is an exception
  print(&apos;Unknown exception: $e&apos;);
} catch (e, s) {
  print(&apos;Exception details:\n $e&apos;);
  print(&apos;Stack trace:\n $s&apos;);
}
</code></pre></li></ul><p>可以向catch()传递1个或2个参数。第一个参数表示：捕获的异常的具体信息，第二个参数表示：异常的堆栈跟踪(stack trace)</p><h5 id="rethrow"><a href="#rethrow" class="headerlink" title="rethrow"></a>rethrow</h5><blockquote><p>rethrow语句用来处理一个异常，同时希望这个异常能够被其它调用的部分使用</p></blockquote><h5 id="finally"><a href="#finally" class="headerlink" title="finally"></a>finally</h5><blockquote><p>Dart 的finally用来执行那些无论异常是否发生都执行的操作。</p></blockquote><hr><h3 id="类"><a href="#类" class="headerlink" title="类"></a>类</h3><blockquote><p>使用new语句来构造一个类。构造函数的名字可能是ClassName，也可以是ClassName.identifier</p></blockquote><pre><code>var jsonData = JSON.decode(&apos;{&quot;x&quot;:1, &quot;y&quot;:2}&apos;);

// Create a Point using Point().
var p1 = new Point(2, 2);

// Create a Point using Point.fromJson().
var p2 = new Point.fromJson(jsonData);
</code></pre><ul><li>使用.来调用实例的变量或者方法。</li><li>使用 ?. 来避免左边操作数为null引发异常。</li><li>使用const替代new来创建编译时的常量构造函数。</li><li>两个使用const构建的同一个构造函数，实例相等。</li><li>获取对象的运行时类型使用：o.runtimeType</li></ul><blockquote><p>所有实例变量会生成一个隐式的getter方法，不是final或const的实例变量也会生成一个隐式的setter方法</p></blockquote><h5 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h5><pre><code>class Point {
  num x;
  num y;

  // 推荐方式
  Point(this.x, this.y);
}
</code></pre><blockquote><p>构造函数不能被继承</p></blockquote><p>子类不会继承父类的构造函数。如果不显式提供子类的构造函数，系统就提供默认的构造函数。</p><blockquote><p>命名构造函数</p></blockquote><pre><code>class Point {
  num x;
  num y;

  Point(this.x, this.y);

  // 命名构造函数
  Point.fromJson(Map json) {
    x = json[&apos;x&apos;];
    y = json[&apos;y&apos;];
  }
}
</code></pre><p>使用命名构造函数可以实现一个类多个构造函数。构造函数不能被继承，父类中的命名构造函数不能被子类继承。如果想要子类也拥有一个父类一样名字的构造函数，必须在子类实现这个构造函数</p><blockquote><p>如果父类不显式提供无参的非命名构造函数，在子类中必须手动调用父类的一个构造函数。在子类构造函数名后，大括号{前，使用super.调用父类的构造函数，中间使用:分割</p></blockquote><pre><code>class Person {
  String firstName;

  Person.fromJson(Map data) {
    print(&apos;in Person&apos;);
  }
}

class Employee extends Person {
  // 父类没有无参数的非命名构造函数，必须手动调用一个构造函数 super.fromJson(data)
  Employee.fromJson(Map data) : super.fromJson(data) {
    print(&apos;in Employee&apos;);
  }
}
</code></pre><blockquote><p>当在构造函数初始化列表中使用super()时，要把它放在最后。</p></blockquote><pre><code>View(Style style, List children)
    : _children = children,
      super(style) {}
</code></pre><blockquote><p>除了调用父类的构造函数，也可以通过初始化列表 在子类的构造函数体前（大括号前）来初始化实例的变量值，使用逗号,分隔</p></blockquote><pre><code>class Point {
  num x;
  num y;

  Point(this.x, this.y);

  // 在构造函数体前 初始化列表 设置实例变量
  Point.fromJson(Map jsonMap)
      : x = jsonMap[&apos;x&apos;],
        y = jsonMap[&apos;y&apos;] {
    print(&apos;In Point.fromJson(): ($x, $y)&apos;);
  }
}
</code></pre><h5 id="工厂构造函数"><a href="#工厂构造函数" class="headerlink" title="工厂构造函数"></a>工厂构造函数</h5><blockquote><p>当实例化了一个构造函数后，不想每次都创建该类的一个新的实例的时候使用factory关键字，定义工厂构造函数，从缓存中返回一个实例，或返回一个子类型的实例</p></blockquote><pre><code>class Logger {
  final String name;
  bool mute = false;
  static final Map&lt;String, Logger&gt; _cache = &lt;String, Logger&gt;{}; // 缓存保存对象
  factory Logger(String name) {
    if (_cache.containsKey(name)) {
      return _cache[name];
    } else {
      final logger = new Logger._internal(name);
      _cache[name] = logger;
      return logger;
    }
  }
  Logger._internal(this.name);// 命名构造函数
  void log(String msg) {
    if (!mute) {
      print(msg);
    }
  }
}

main() {
  var p1 = new Logger(&quot;1&quot;);
  p1.log(&quot;2&quot;);

  var p2 = new Logger(&apos;22&apos;);
  p2.log(&apos;3&apos;);
  var p3 = new Logger(&apos;1&apos;);// 相同对象直接访问缓存
}
</code></pre><h5 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h5><h6 id="Getters-and-setters"><a href="#Getters-and-setters" class="headerlink" title="Getters and setters"></a>Getters and setters</h6><blockquote><p>get()和set()方法是Dart 语言提供的专门用来读取和写入对象的属性的方法。每一个类的实例变量都有一个隐式的getter和可能的setter（如果字段为final或const，只有getter）</p></blockquote><h5 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h5><blockquote><p>使用abstract关键字定义一个抽象类，抽象类不能实例化。抽象类通常用来定义接口。</p></blockquote><h5 id="隐式接口"><a href="#隐式接口" class="headerlink" title="隐式接口"></a>隐式接口</h5><blockquote><p>每一个类都隐式的定义一个接口，这个接口包含了这个类的所有实例成员和它实现的所有接口</p></blockquote><blockquote><p>一个类可以实现一个或多个（用,隔开）接口，通过implements关键字。</p></blockquote><pre><code>class Person {
  final _name;
  Person(this._name);
  String greet(who) =&gt; &apos;hello,$who,i am $_name&apos;;
}

class Imposter implements Person {
  final _name = &apos;&apos;;
  String greet(who) =&gt; &apos;hi $who.do you know who i am.&apos;;
}

greetBob(Person p) =&gt; p.greet(&apos;bob&apos;);
main(List&lt;String&gt; args) {
  print(greetBob(new Person(&apos;lili&apos;)));
  print(greetBob(new Imposter()));
}
</code></pre><h5 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h5><blockquote><p>使用extends来创造子类，使用super来指向父类</p></blockquote><h5 id="枚举类型"><a href="#枚举类型" class="headerlink" title="枚举类型"></a>枚举类型</h5><blockquote><p>枚举类型是一种特殊的类，通常用来表示一组固定数字的常量值。</p></blockquote><blockquote><p>每个枚举类型都有一个index的getter，返回以0开始的位置索引，每次加1。</p></blockquote><blockquote><p>在switch语句中使用枚举，必须在case语句中判断所有的枚举，否则会获得警告。</p></blockquote><p>枚举类型有以下限制：</p><ul><li>不能继承，mixin，或实现一个枚举。</li><li>不能显式的实例化一个枚举。</li></ul><hr><h3 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h3><blockquote><p>使用&lt;…&gt; 的方式来定义泛型</p></blockquote><blockquote><p>虽然Dart 语言中类型是可选的，但是明确的指明使用的是泛型，会让代码更好理解</p></blockquote><pre><code>abstract class Cache&lt;T&gt; {
   T getByKey(String key);
   setByKey(String key, T value);
 }
</code></pre><h5 id="用于集合类型"><a href="#用于集合类型" class="headerlink" title="用于集合类型"></a>用于集合类型</h5><blockquote><p>泛型用于List 和 Map 类型参数化</p></blockquote><pre><code>var names = &lt;String&gt;[&apos;Seth&apos;, &apos;Kathy&apos;, &apos;Lars&apos;];
var pages = &lt;String, String&gt;{
  &apos;index.html&apos;: &apos;Homepage&apos;,
  &apos;robots.txt&apos;: &apos;Hints for web robots&apos;,
  &apos;humans.txt&apos;: &apos;We are people, not machines&apos;
};
</code></pre><h5 id="泛型集合及它们所包含的类型"><a href="#泛型集合及它们所包含的类型" class="headerlink" title="泛型集合及它们所包含的类型"></a>泛型集合及它们所包含的类型</h5><blockquote><p>dart的泛型类型是具体的，在运行时包含它们的类型信息。</p></blockquote><hr><h3 id="库和可见性"><a href="#库和可见性" class="headerlink" title="库和可见性"></a>库和可见性</h3><blockquote><p>使用import 和 library 指令可以方便的创建一个模块或分享代码。一个Dart 库不仅能够提供相应的API，还可以包含一些以_开头的私有变量仅在库内部可见</p></blockquote><blockquote><p>如果导入的库拥有相互冲突的名字，使用as为其中一个或几个指定不一样的前缀。</p></blockquote><pre><code>import &apos;package:lib1/lib1.dart&apos;;
import &apos;package:lib2/lib2.dart&apos; as lib2;
// ...
Element element1 = new Element();           // Uses Element from lib1.
lib2.Element element2 = new lib2.Element(); // Uses Element from lib2.
</code></pre><blockquote><p>如果只需要使用库的一部分内容，使用show或hide有选择的导入。</p></blockquote><pre><code>// 仅导入foo.
import &apos;package:lib1/lib1.dart&apos; show foo;

// 除了foo都导入
import &apos;package:lib2/lib2.dart&apos; hide foo;
</code></pre><blockquote><p>要延迟加载一个库，首先必须使用deferred as导入它。</p></blockquote><pre><code>import &apos;package:deferred/hello.dart&apos; deferred as hello;

greet() async {
  // 使用await关键字暂停执行，直到库加载
  await hello.loadLibrary();
  hello.printGreeting();
}
</code></pre><p>可以在代码中多次调用loadLibrary()方法。但是实际上它只会被执行一次。</p><p>使用延迟加载的注意事项：</p><ul><li>延迟加载的内容只有在加载后才存在。</li><li>Dart 隐式的将deferred as改为了deferred as namespace。loadLibrary()返回值是Future</li></ul><hr><h3 id="异步支持"><a href="#异步支持" class="headerlink" title="异步支持"></a>异步支持</h3><p>使用async函数和await表达式实现异步操作。</p><p>当需要使用一个从Future返回的值时，有两个选择：</p><ul><li>使用async和await。</li><li>使用Future API。</li></ul><p>当需要从一个Stream获取值时，有两个选择：</p><ul><li>使用async和异步的循环(await for)。</li><li><p>使用Stream API。<br>代码使用了async和await就是异步的，虽然看起来像同步代码。</p><pre><code>checkVersion() async {          //注意这里 async 在小括号后面，和 JavaScript 不一样
  var version = await lookUpVersion();
  if (version == expectedVersion) {
    // Do something.
  } else {
    // Do something else.
  }
}
</code></pre></li></ul><blockquote><p>给函数添加async关键字将使函数返回一个Future类型。</p></blockquote><pre><code>// 修改前是同步的
String lookUpVersionSync() =&gt; &apos;1.0.0&apos;;

// 修改后 是异步的 函数体不需要使用Future API
// dart会在必要的时候创建Future对象
Future&lt;String&gt; lookUpVersion() async =&gt; &apos;1.0.0&apos;;
</code></pre><blockquote><p>在Stream中使用异步循环</p></blockquote><pre><code> // expression的值必须是Stram类型
await for (variable declaration in expression) {
  // Executes each time the stream emits a value.
}
</code></pre><p>异步循环的执行流程如下：</p><ul><li>等待 stream 发出数据。</li><li>执行循环体，并将变量的值设置为发出的数据。</li><li>重复1.，2.直到stream 对象被关闭</li></ul><p>注：这个过程类似于 JavaScript 的 Rxjs</p><hr><h3 id="可调用类"><a href="#可调用类" class="headerlink" title="可调用类"></a>可调用类</h3><blockquote><p>Dart 语言中为了能够让类像函数一样能够被调用，可以实现call()方法。</p></blockquote><pre><code>class WannabeFunction {
  call(String a, String b, String c) =&gt; &apos;$a $b $c!&apos;;
}

main() {
  var wf = new WannabeFunction();
  var out = wf(&quot;Hi&quot;,&quot;there,&quot;,&quot;gang&quot;);
  print(&apos;$out&apos;); // Hi there, gang!
  print(wf.runtimeType); // WannabeFunction
  print(out.runtimeType); // String
  print(wf is Function); // true
}
</code></pre></div><footer class="post-footer"><div class="post-tags"><a href="/tags/dart/" rel="tag"># dart</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/uncategorized/learn-into-javaScript_call&bind&apply.html" rel="next" title="JS call & bind & apply（I）"><i class="fa fa-chevron-left"></i> JS call & bind & apply（I）</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/uncategorized/正则表达式入门.html" rel="prev" title="正则表达式入门">正则表达式入门 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">Overview</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="chaochao"><p class="site-author-name" itemprop="name">chaochao</p><p class="site-description motion-element" itemprop="description">Life is like a box of chocalates, you will never know what the next one tastes like.</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">31</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">3</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><span class="site-state-item-count">12</span> <span class="site-state-item-name">tags</span></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/shichao1996" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:2483061998@qq.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-qq"></i>E-Mail</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://wangriyu.wang" title="王日日立" target="_blank">王日日立</a></li><li class="links-of-blogroll-item"><a href="https://yangchenglong11.github.io" title="羞涩的龙儿" target="_blank">羞涩的龙儿</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#hello-world"><span class="nav-number">1.</span> <span class="nav-text">hello world</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#重要的概念"><span class="nav-number">2.</span> <span class="nav-text">重要的概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#变量"><span class="nav-number">3.</span> <span class="nav-text">变量</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#num"><span class="nav-number">3.0.0.1.</span> <span class="nav-text">num</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#string"><span class="nav-number">3.0.0.2.</span> <span class="nav-text">string</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#bool"><span class="nav-number">3.0.0.3.</span> <span class="nav-text">bool</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#list"><span class="nav-number">3.0.0.4.</span> <span class="nav-text">list</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#map"><span class="nav-number">3.0.0.5.</span> <span class="nav-text">map</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#symbol"><span class="nav-number">3.0.0.6.</span> <span class="nav-text">symbol</span></a></li></ol></li></ol><li class="nav-item nav-level-3"><a class="nav-link" href="#函数"><span class="nav-number">4.</span> <span class="nav-text">函数</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#函数参数"><span class="nav-number">4.0.0.1.</span> <span class="nav-text">函数参数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#闭包"><span class="nav-number">4.0.0.2.</span> <span class="nav-text">闭包</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#运算符"><span class="nav-number">5.</span> <span class="nav-text">运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#流程控制语句"><span class="nav-number">6.</span> <span class="nav-text">流程控制语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异常"><span class="nav-number">7.</span> <span class="nav-text">异常</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#throw"><span class="nav-number">7.0.1.</span> <span class="nav-text">throw</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#catch"><span class="nav-number">7.0.2.</span> <span class="nav-text">catch</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#rethrow"><span class="nav-number">7.0.3.</span> <span class="nav-text">rethrow</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#finally"><span class="nav-number">7.0.4.</span> <span class="nav-text">finally</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类"><span class="nav-number">8.</span> <span class="nav-text">类</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#构造函数"><span class="nav-number">8.0.1.</span> <span class="nav-text">构造函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#工厂构造函数"><span class="nav-number">8.0.2.</span> <span class="nav-text">工厂构造函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方法"><span class="nav-number">8.0.3.</span> <span class="nav-text">方法</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Getters-and-setters"><span class="nav-number">8.0.3.1.</span> <span class="nav-text">Getters and setters</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#抽象类"><span class="nav-number">8.0.4.</span> <span class="nav-text">抽象类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#隐式接口"><span class="nav-number">8.0.5.</span> <span class="nav-text">隐式接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#继承"><span class="nav-number">8.0.6.</span> <span class="nav-text">继承</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#枚举类型"><span class="nav-number">8.0.7.</span> <span class="nav-text">枚举类型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#泛型"><span class="nav-number">9.</span> <span class="nav-text">泛型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#用于集合类型"><span class="nav-number">9.0.1.</span> <span class="nav-text">用于集合类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#泛型集合及它们所包含的类型"><span class="nav-number">9.0.2.</span> <span class="nav-text">泛型集合及它们所包含的类型</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#库和可见性"><span class="nav-number">10.</span> <span class="nav-text">库和可见性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#异步支持"><span class="nav-number">11.</span> <span class="nav-text">异步支持</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#可调用类"><span class="nav-number">12.</span> <span class="nav-text">可调用类</span></a></li></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2018</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Lovae</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span class="post-meta-item-text">Site words total count&#58;</span> <span title="Site words total count">58.4k</span></div><div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div><span class="post-meta-divider">|</span><div class="theme-info">Theme &mdash; 超超的魔改版 NexT</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("NcEYIEFNzuWTwDuHlSSahQRX-gzGzoHsz","G2921dRelqxS63CKeG9h0io8")</script><script>function showTime(e){var t=new AV.Query(e),c=[],u=$(".leancloud_visitors");u.each(function(){c.push($(this).attr("id").trim())}),t.containedIn("url",c),t.find().done(function(e){var t=".leancloud-visitors-count";if(0!==e.length){for(var n=0;n<e.length;n++){var o=e[n],i=o.get("url"),s=o.get("time"),r=document.getElementById(i);$(r).find(t).text(s)}for(n=0;n<c.length;n++){i=c[n],r=document.getElementById(i);var l=$(r).find(t);""==l.text()&&l.text(0)}}else u.find(t).text(0)}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(i){var e=$(".leancloud_visitors"),s=e.attr("id").trim(),r=e.attr("data-flag-title").trim(),t=new AV.Query(i);t.equalTo("url",s),t.find({success:function(e){if(0<e.length){var t=e[0];t.fetchWhenSave(!0),t.increment("time"),t.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var n=new i,o=new AV.ACL;o.setPublicReadAccess(!0),o.setPublicWriteAccess(!0),n.setACL(o),n.set("title",r),n.set("url",s),n.set("time",1),n.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):1<$(".post-title-link").length&&showTime(e)})</script><script type="text/javascript" src="/js/src/js.cookie.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scroll-cookie.js?v=5.1.4"></script><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",model:{scale:.8,jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"right",width:100,height:200,vOffset:-100,hOffset:30},mobile:{show:!0}})</script></body></html>